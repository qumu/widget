var t,e,n,o,r,i,l,_,a,s,u,c={},p=[],f=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,h=Array.isArray;function d(t,e){for(var n in e)t[n]=e[n];return t}function m(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function v(e,n,o){var r,i,l,_={};for(l in n)"key"==l?r=n[l]:"ref"==l?i=n[l]:_[l]=n[l];if(arguments.length>2&&(_.children=arguments.length>3?t.call(arguments,2):o),"function"==typeof e&&null!=e.defaultProps)for(l in e.defaultProps)void 0===_[l]&&(_[l]=e.defaultProps[l]);return y(e,_,r,i,null)}function y(t,o,r,i,l){var _={type:t,props:o,key:r,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==l?++n:l,__i:-1,__u:0};return null==l&&null!=e.vnode&&e.vnode(_),_}function g(t){return t.children}function w(t,e){this.props=t,this.context=e}function b(t,e){if(null==e)return t.__?b(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?b(t):null}function k(t){var e,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return k(t)}}function P(t){(!t.__d&&(t.__d=!0)&&o.push(t)&&!C.__r++||r!=e.debounceRendering)&&((r=e.debounceRendering)||i)(C)}function C(){for(var t,n,r,i,_,a,s,u=1;o.length;)o.length>u&&o.sort(l),t=o.shift(),u=o.length,t.__d&&(r=void 0,i=void 0,_=(i=(n=t).__v).__e,a=[],s=[],n.__P&&((r=d({},i)).__v=i.__v+1,e.vnode&&e.vnode(r),T(n.__P,r,i,n.__n,n.__P.namespaceURI,32&i.__u?[_]:null,a,null==_?b(i):_,!!(32&i.__u),s),r.__v=i.__v,r.__.__k[r.__i]=r,I(a,r,s),i.__e=i.__=null,r.__e!=_&&k(r)));C.__r=0}function E(t,e,n,o,r,i,l,_,a,s,u){var f,d,m,v,w,k,P,C=o&&o.__k||p,E=e.length;for(a=function(t,e,n,o,r){var i,l,_,a,s,u=n.length,c=u,p=0;for(t.__k=new Array(r),i=0;i<r;i++)null!=(l=e[i])&&"boolean"!=typeof l&&"function"!=typeof l?(a=i+p,(l=t.__k[i]="string"==typeof l||"number"==typeof l||"bigint"==typeof l||l.constructor==String?y(null,l,null,null,null):h(l)?y(g,{children:l},null,null,null):null==l.constructor&&l.__b>0?y(l.type,l.props,l.key,l.ref?l.ref:null,l.__v):l).__=t,l.__b=t.__b+1,_=null,-1!=(s=l.__i=S(l,n,a,c))&&(c--,(_=n[s])&&(_.__u|=2)),null==_||null==_.__v?(-1==s&&(r>u?p--:r<u&&p++),"function"!=typeof l.type&&(l.__u|=4)):s!=a&&(s==a-1?p--:s==a+1?p++:(s>a?p--:p++,l.__u|=4))):t.__k[i]=null;if(c)for(i=0;i<u;i++)null!=(_=n[i])&&!(2&_.__u)&&(_.__e==o&&(o=b(_)),U(_,_));return o}(n,e,C,a,E),f=0;f<E;f++)null!=(m=n.__k[f])&&(d=-1==m.__i?c:C[m.__i]||c,m.__i=f,k=T(t,m,d,r,i,l,_,a,s,u),v=m.__e,m.ref&&d.ref!=m.ref&&(d.ref&&A(d.ref,null,m),u.push(m.ref,m.__c||v,m)),null==w&&null!=v&&(w=v),(P=!!(4&m.__u))||d.__k===m.__k?a=O(m,a,t,P):"function"==typeof m.type&&void 0!==k?a=k:v&&(a=v.nextSibling),m.__u&=-7);return n.__e=w,a}function O(t,e,n,o){var r,i;if("function"==typeof t.type){for(r=t.__k,i=0;r&&i<r.length;i++)r[i]&&(r[i].__=t,e=O(r[i],e,n,o));return e}t.__e!=e&&(o&&(e&&t.type&&!e.parentNode&&(e=b(t)),n.insertBefore(t.__e,e||null)),e=t.__e);do{e=e&&e.nextSibling}while(null!=e&&8==e.nodeType);return e}function L(t,e){return e=e||[],null==t||"boolean"==typeof t||(h(t)?t.some(function(t){L(t,e)}):e.push(t)),e}function S(t,e,n,o){var r,i,l,_=t.key,a=t.type,s=e[n],u=null!=s&&!(2&s.__u);if(null===s&&null==t.key||u&&_==s.key&&a==s.type)return n;if(o>(u?1:0))for(r=n-1,i=n+1;r>=0||i<e.length;)if(null!=(s=e[l=r>=0?r--:i++])&&!(2&s.__u)&&_==s.key&&a==s.type)return l;return-1}function x(t,e,n){"-"==e[0]?t.setProperty(e,null==n?"":n):t[e]=null==n?"":"number"!=typeof n||f.test(e)?n:n+"px"}function N(t,e,n,o,r){var i,l;t:if("style"==e)if("string"==typeof n)t.style.cssText=n;else{if("string"==typeof o&&(t.style.cssText=o=""),o)for(e in o)n&&e in n||x(t.style,e,"");if(n)for(e in n)o&&n[e]==o[e]||x(t.style,e,n[e])}else if("o"==e[0]&&"n"==e[1])i=e!=(e=e.replace(_,"$1")),l=e.toLowerCase(),e=l in t||"onFocusOut"==e||"onFocusIn"==e?l.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+i]=n,n?o?n.u=o.u:(n.u=a,t.addEventListener(e,i?u:s,i)):t.removeEventListener(e,i?u:s,i);else{if("http://www.w3.org/2000/svg"==r)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=e&&"height"!=e&&"href"!=e&&"list"!=e&&"form"!=e&&"tabIndex"!=e&&"download"!=e&&"rowSpan"!=e&&"colSpan"!=e&&"role"!=e&&"popover"!=e&&e in t)try{t[e]=null==n?"":n;break t}catch(c){}"function"==typeof n||(null==n||!1===n&&"-"!=e[4]?t.removeAttribute(e):t.setAttribute(e,"popover"==e&&1==n?"":n))}}function H(t){return function(n){if(this.l){var o=this.l[n.type+t];if(null==n.t)n.t=a++;else if(n.t<o.u)return;return o(e.event?e.event(n):n)}}}function T(n,o,r,i,l,_,a,s,u,p){var f,v,y,k,P,C,O,L,S,x,H,T,I,A,U,q,R,j=o.type;if(null!=o.constructor)return null;128&r.__u&&(u=!!(32&r.__u),_=[s=o.__e=r.__e]),(f=e.__b)&&f(o);t:if("function"==typeof j)try{if(L=o.props,S="prototype"in j&&j.prototype.render,x=(f=j.contextType)&&i[f.__c],H=f?x?x.props.value:f.__:i,r.__c?O=(v=o.__c=r.__c).__=v.__E:(S?o.__c=v=new j(L,H):(o.__c=v=new w(L,H),v.constructor=j,v.render=D),x&&x.sub(v),v.props=L,v.state||(v.state={}),v.context=H,v.__n=i,y=v.__d=!0,v.__h=[],v._sb=[]),S&&null==v.__s&&(v.__s=v.state),S&&null!=j.getDerivedStateFromProps&&(v.__s==v.state&&(v.__s=d({},v.__s)),d(v.__s,j.getDerivedStateFromProps(L,v.__s))),k=v.props,P=v.state,v.__v=o,y)S&&null==j.getDerivedStateFromProps&&null!=v.componentWillMount&&v.componentWillMount(),S&&null!=v.componentDidMount&&v.__h.push(v.componentDidMount);else{if(S&&null==j.getDerivedStateFromProps&&L!==k&&null!=v.componentWillReceiveProps&&v.componentWillReceiveProps(L,H),!v.__e&&null!=v.shouldComponentUpdate&&!1===v.shouldComponentUpdate(L,v.__s,H)||o.__v==r.__v){for(o.__v!=r.__v&&(v.props=L,v.state=v.__s,v.__d=!1),o.__e=r.__e,o.__k=r.__k,o.__k.some(function(t){t&&(t.__=o)}),T=0;T<v._sb.length;T++)v.__h.push(v._sb[T]);v._sb=[],v.__h.length&&a.push(v);break t}null!=v.componentWillUpdate&&v.componentWillUpdate(L,v.__s,H),S&&null!=v.componentDidUpdate&&v.__h.push(function(){v.componentDidUpdate(k,P,C)})}if(v.context=H,v.props=L,v.__P=n,v.__e=!1,I=e.__r,A=0,S){for(v.state=v.__s,v.__d=!1,I&&I(o),f=v.render(v.props,v.state,v.context),U=0;U<v._sb.length;U++)v.__h.push(v._sb[U]);v._sb=[]}else do{v.__d=!1,I&&I(o),f=v.render(v.props,v.state,v.context),v.state=v.__s}while(v.__d&&++A<25);v.state=v.__s,null!=v.getChildContext&&(i=d(d({},i),v.getChildContext())),S&&!y&&null!=v.getSnapshotBeforeUpdate&&(C=v.getSnapshotBeforeUpdate(k,P)),q=f,null!=f&&f.type===g&&null==f.key&&(q=$(f.props.children)),s=E(n,h(q)?q:[q],o,r,i,l,_,a,s,u,p),v.base=o.__e,o.__u&=-161,v.__h.length&&a.push(v),O&&(v.__E=v.__=null)}catch(W){if(o.__v=null,u||null!=_)if(W.then){for(o.__u|=u?160:128;s&&8==s.nodeType&&s.nextSibling;)s=s.nextSibling;_[_.indexOf(s)]=null,o.__e=s}else{for(R=_.length;R--;)m(_[R]);M(o)}else o.__e=r.__e,o.__k=r.__k,W.then||M(o);e.__e(W,o,r)}else null==_&&o.__v==r.__v?(o.__k=r.__k,o.__e=r.__e):s=o.__e=function(n,o,r,i,l,_,a,s,u){var p,f,d,v,y,g,w,k=r.props,P=o.props,C=o.type;if("svg"==C?l="http://www.w3.org/2000/svg":"math"==C?l="http://www.w3.org/1998/Math/MathML":l||(l="http://www.w3.org/1999/xhtml"),null!=_)for(p=0;p<_.length;p++)if((y=_[p])&&"setAttribute"in y==!!C&&(C?y.localName==C:3==y.nodeType)){n=y,_[p]=null;break}if(null==n){if(null==C)return document.createTextNode(P);n=document.createElementNS(l,C,P.is&&P),s&&(e.__m&&e.__m(o,_),s=!1),_=null}if(null==C)k===P||s&&n.data==P||(n.data=P);else{if(_=_&&t.call(n.childNodes),k=r.props||c,!s&&null!=_)for(k={},p=0;p<n.attributes.length;p++)k[(y=n.attributes[p]).name]=y.value;for(p in k)if(y=k[p],"children"==p);else if("dangerouslySetInnerHTML"==p)d=y;else if(!(p in P)){if("value"==p&&"defaultValue"in P||"checked"==p&&"defaultChecked"in P)continue;N(n,p,null,y,l)}for(p in P)y=P[p],"children"==p?v=y:"dangerouslySetInnerHTML"==p?f=y:"value"==p?g=y:"checked"==p?w=y:s&&"function"!=typeof y||k[p]===y||N(n,p,y,k[p],l);if(f)s||d&&(f.__html==d.__html||f.__html==n.innerHTML)||(n.innerHTML=f.__html),o.__k=[];else if(d&&(n.innerHTML=""),E("template"==o.type?n.content:n,h(v)?v:[v],o,r,i,"foreignObject"==C?"http://www.w3.org/1999/xhtml":l,_,a,_?_[0]:r.__k&&b(r,0),s,u),null!=_)for(p=_.length;p--;)m(_[p]);s||(p="value","progress"==C&&null==g?n.removeAttribute("value"):null!=g&&(g!==n[p]||"progress"==C&&!g||"option"==C&&g!=k[p])&&N(n,p,g,k[p],l),p="checked",null!=w&&w!=n[p]&&N(n,p,w,k[p],l))}return n}(r.__e,o,r,i,l,_,a,u,p);return(f=e.diffed)&&f(o),128&o.__u?void 0:s}function M(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(M)}function I(t,n,o){for(var r=0;r<o.length;r++)A(o[r],o[++r],o[++r]);e.__c&&e.__c(n,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(t){t.call(n)})}catch(o){e.__e(o,n.__v)}})}function $(t){return"object"!=typeof t||null==t||t.__b&&t.__b>0?t:h(t)?t.map($):d({},t)}function A(t,n,o){try{if("function"==typeof t){var r="function"==typeof t.__u;r&&t.__u(),r&&null==n||(t.__u=t(n))}else t.current=n}catch(i){e.__e(i,o)}}function U(t,n,o){var r,i;if(e.unmount&&e.unmount(t),(r=t.ref)&&(r.current&&r.current!=t.__e||A(r,null,n)),null!=(r=t.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(l){e.__e(l,n)}r.base=r.__P=null}if(r=t.__k)for(i=0;i<r.length;i++)r[i]&&U(r[i],n,o||"function"!=typeof t.type);o||m(t.__e),t.__c=t.__=t.__e=void 0}function D(t,e,n){return this.constructor(t,n)}function q(n,o,r){var i,l,_;o==document&&(o=document.documentElement),e.__&&e.__(n,o),i=!1?null:o.__k,l=[],_=[],T(o,n=o.__k=v(g,null,[n]),i||c,c,o.namespaceURI,i?null:o.firstChild?t.call(o.childNodes):null,l,i?i.__e:o.firstChild,false,_),I(l,n,_)}t=p.slice,e={__e:function(t,e,n,o){for(var r,i,l;e=e.__;)if((r=e.__c)&&!r.__)try{if((i=r.constructor)&&null!=i.getDerivedStateFromError&&(r.setState(i.getDerivedStateFromError(t)),l=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(t,o||{}),l=r.__d),l)return r.__E=r}catch(_){t=_}throw t}},n=0,w.prototype.setState=function(t,e){var n;n=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=d({},this.state),"function"==typeof t&&(t=t(d({},n),this.props)),t&&d(n,t),null!=t&&this.__v&&(e&&this._sb.push(e),P(this))},w.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),P(this))},w.prototype.render=g,o=[],i="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,l=function(t,e){return t.__v.__b-e.__v.__b},C.__r=0,_=/(PointerCapture)$|Capture$/i,a=0,s=H(!1),u=H(!0);var R=0;function j(t,n,o,r,i,l){n||(n={});var _,a,s=n;if("ref"in s)for(a in s={},n)"ref"==a?_=n[a]:s[a]=n[a];var u={type:t,props:s,key:o,ref:_,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--R,__i:-1,__u:0,__source:i,__self:l};if("function"==typeof t&&(_=t.defaultProps))for(a in _)void 0===s[a]&&(s[a]=_[a]);return e.vnode&&e.vnode(u),u}class W{async getPresentation(t,e,n="created",o="DESCENDING"){const r=new URL(`/api/2.2/rest/widgets/${t}.json`,`https://${e}`);let i;r.searchParams.set("offset","0"),r.searchParams.set("limit","1"),r.searchParams.set("sortBy",`${n},${o}`),r.searchParams.set("useUserAuth","false");try{i=await fetch(r.toString(),{method:"GET"})}catch(a){throw new Error(`Failed to fetch presentation from host "${e}": ${a.message}`,{cause:a})}const{kulus:l,error:_}=await i.json();if(!i.ok||!l?.length)throw new Error(_?.message??`Failed to fetch presentation with guid "${t}" from host "${e}"`);return l[0]}}const F=/* @__PURE__ */new Set(["selector","host","guid","locales","widgetOptions","playerParameters","sortBy","sortOrder"]),V=/* @__PURE__ */new Set(["playbackMode","playIcon","onIframeLoad","onThumbnailClick"]),B=/* @__PURE__ */new Set(["captions","debug","loop","playerConfigurationGuid","pv","quality","showControlPanel","sidebar","speech","speechTerm","start","volume","reporting","reportingId"]);class Z{createConfiguration(t){const e=this.validateAndSanitize(t),n={playbackMode:"inline",...e.widgetOptions,playIcon:{height:44,position:"center",width:44,...e.widgetOptions?.playIcon}},o={...e.playerParameters};return{...e,host:e.host.replace("https://","").split("/")[0],playerParameters:o,widgetOptions:n}}validateAndSanitize(t){if(!t||"object"!=typeof t)throw new Error("Configuration must be a valid object");if(["selector","host","guid"].forEach(e=>{if(!Object.hasOwn(t,e))throw new Error(`\`${e}\` is not defined in the configuration`)}),["selector","host","guid","sortBy"].forEach(e=>{const n=t[e];if(Object.hasOwn(t,e)){if(null==n)throw new Error(`\`${e}\` is undefined or null`);if(!("selector"===e&&n instanceof HTMLElement)){if("string"!=typeof n)throw new TypeError(`\`${e}\` must be a string${"selector"===e?" or an instance of HTMLElement":""}`);if(""===n.trim())throw new Error(`\`${e}\` cannot be an empty string`)}}}),Object.hasOwn(t,"sortOrder")&&!["ASCENDING","DESCENDING"].includes(t.sortOrder))throw new Error('`sortOrder` must be either "ASCENDING" or "DESCENDING"');const e={...t,playerParameters:{...t.playerParameters},widgetOptions:{...t.widgetOptions}};t.widgetOptions?.playIcon&&(e.widgetOptions.playIcon={...t.widgetOptions.playIcon}),Object.keys(e).forEach(t=>{F.has(t)||(console.warn(`Unsupported field \`${t}\` in configuration`),delete e[t])});try{new URL(`https://${e.host.replace("https://","")}`)}catch{throw new Error("`host` must be a valid domain name")}return this.validatePlayerParameters(e.playerParameters),this.validateWidgetOptions(e.widgetOptions),e}validatePlayerParameters(t){if(t){if(Object.keys(t).forEach(e=>{B.has(e)||(console.warn(`Unsupported field \`playerParameters.${e}\` in configuration`),delete t[e])}),void 0!==t.pv&&!["pipls","pipss","sbs"].includes(t.pv))throw new Error('`playerParameters.pv` must be either "pipls", "pipss" or "sbs"');if(void 0!==t.quality&&!["240p","480p","720p","1080p","1440p","auto","best"].includes(t.quality))throw new Error('`playerParameters.quality` must be either "240p", "480p", "720p", "1080p", "1440p", "auto" or "best"')}}validateWidgetOptions(t){if(t){if(Object.keys(t).forEach(e=>{V.has(e)||(console.warn(`Unsupported field \`widgetOptions.${e}\` in configuration`),delete t[e])}),void 0!==t.playbackMode){const e=t.playbackMode;if(!["inline","inline-autoload","inline-autoplay","modal"].includes(e))throw new Error('`widgetOptions.playbackMode` must be either "inline", "inline-autoload", "inline-autoplay" or "modal"')}if(void 0!==t.playIcon){if(void 0!==t.playIcon.position){if(!["top-left","top","top-right","left","center","right","bottom-left","bottom","bottom-right"].includes(t.playIcon.position))throw new Error("`widgetOptions.playIcon.position` must be a valid position value")}[void 0,"inline","modal"].includes(t.playbackMode)||console.warn('`widgetOptions.playIcon` is only applicable when `widgetOptions.playbackMode` is either "modal" or "inline"')}if(void 0!==t.onIframeLoad&&"function"!=typeof t.onIframeLoad)throw new TypeError("`widgetOptions.onIframeLoad` must be a function");if(void 0!==t.onThumbnailClick)if([void 0,"inline"].includes(t.playbackMode)){if("function"!=typeof t.onThumbnailClick)throw new TypeError("`widgetOptions.onThumbnailClick` must be a function")}else console.warn('`widgetOptions.onThumbnailClick` is only applicable when `widgetOptions.playbackMode` is "inline"'),delete t.onThumbnailClick}}}var z,G,K,Y,J=0,Q=[],X=e,tt=X.__b,et=X.__r,nt=X.diffed,ot=X.__c,rt=X.unmount,it=X.__;function lt(t,e){X.__h&&X.__h(G,t,J||e),J=0;var n=G.__H||(G.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function _t(t){return J=1,function(t,e,n){var o=lt(z++,2);if(o.t=t,!o.__c&&(o.__=[n?n(e):mt(void 0,e),function(t){var e=o.__N?o.__N[0]:o.__[0],n=o.t(e,t);e!==n&&(o.__N=[n,o.__[1]],o.__c.setState({}))}],o.__c=G,!G.__f)){var r=function(t,e,n){if(!o.__c.__H)return!0;var r=o.__c.__H.__.filter(function(t){return!!t.__c});if(r.every(function(t){return!t.__N}))return!i||i.call(this,t,e,n);var l=o.__c.props!==t;return r.forEach(function(t){if(t.__N){var e=t.__[0];t.__=t.__N,t.__N=void 0,e!==t.__[0]&&(l=!0)}}),i&&i.call(this,t,e,n)||l};G.__f=!0;var i=G.shouldComponentUpdate,l=G.componentWillUpdate;G.componentWillUpdate=function(t,e,n){if(this.__e){var o=i;i=void 0,r(t,e,n),i=o}l&&l.call(this,t,e,n)},G.shouldComponentUpdate=r}return o.__N||o.__}(mt,t)}function at(t,e){var n=lt(z++,3);!X.__s&&dt(n.__H,e)&&(n.__=t,n.u=e,G.__H.__h.push(n))}function st(t){return J=5,function(t,e){var n=lt(z++,7);return dt(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}(function(){return{current:t}},[])}function ut(){for(var t;t=Q.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(ft),t.__H.__h.forEach(ht),t.__H.__h=[]}catch(e){t.__H.__h=[],X.__e(e,t.__v)}}X.__b=function(t){G=null,tt&&tt(t)},X.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),it&&it(t,e)},X.__r=function(t){et&&et(t),z=0;var e=(G=t.__c).__H;e&&(K===G?(e.__h=[],G.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.u=t.__N=void 0})):(e.__h.forEach(ft),e.__h.forEach(ht),e.__h=[],z=0)),K=G},X.diffed=function(t){nt&&nt(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(1!==Q.push(e)&&Y===X.requestAnimationFrame||((Y=X.requestAnimationFrame)||pt)(ut)),e.__H.__.forEach(function(t){t.u&&(t.__H=t.u),t.u=void 0})),K=G=null},X.__c=function(t,e){e.some(function(t){try{t.__h.forEach(ft),t.__h=t.__h.filter(function(t){return!t.__||ht(t)})}catch(n){e.some(function(t){t.__h&&(t.__h=[])}),e=[],X.__e(n,t.__v)}}),ot&&ot(t,e)},X.unmount=function(t){rt&&rt(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(t){try{ft(t)}catch(n){e=n}}),n.__H=void 0,e&&X.__e(e,n.__v))};var ct="function"==typeof requestAnimationFrame;function pt(t){var e,n=function(){clearTimeout(o),ct&&cancelAnimationFrame(e),setTimeout(t)},o=setTimeout(n,35);ct&&(e=requestAnimationFrame(n))}function ft(t){var e=G,n=t.__c;"function"==typeof n&&(t.__c=void 0,n()),G=e}function ht(t){var e=G;t.__c=t.__(),G=e}function dt(t,e){return!t||t.length!==e.length||e.some(function(e,n){return e!==t[n]})}function mt(t,e){return"function"==typeof e?e(t):e}function vt(t,e){for(var n in t)if("__source"!==n&&!(n in e))return!0;for(var o in e)if("__source"!==o&&t[o]!==e[o])return!0;return!1}function yt(t,e){this.props=t,this.context=e}(yt.prototype=new w).isPureReactComponent=!0,yt.prototype.shouldComponentUpdate=function(t,e){return vt(this.props,t)||vt(this.state,e)};var gt=e.__b;e.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),gt&&gt(t)};var wt=e.__e;e.__e=function(t,e,n,o){if(t.then)for(var r,i=e;i=i.__;)if((r=i.__c)&&r.__c)return null==e.__e&&(e.__e=n.__e,e.__k=n.__k),r.__c(t,e);wt(t,e,n,o)};var bt=e.unmount;function kt(t,e,n){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(t){"function"==typeof t.__c&&t.__c()}),t.__c.__H=null),null!=(t=function(t,e){for(var n in e)t[n]=e[n];return t}({},t)).__c&&(t.__c.__P===n&&(t.__c.__P=e),t.__c.__e=!0,t.__c=null),t.__k=t.__k&&t.__k.map(function(t){return kt(t,e,n)})),t}function Pt(t,e,n){return t&&n&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(t){return Pt(t,e,n)}),t.__c&&t.__c.__P===e&&(t.__e&&n.appendChild(t.__e),t.__c.__e=!0,t.__c.__P=n)),t}function Ct(){this.__u=0,this.o=null,this.__b=null}function Et(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function Ot(){this.i=null,this.l=null}e.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&32&t.__u&&(t.type=null),bt&&bt(t)},(Ct.prototype=new w).__c=function(t,e){var n=e.__c,o=this;null==o.o&&(o.o=[]),o.o.push(n);var r=Et(o.__v),i=!1,l=function(){i||(i=!0,n.__R=null,r?r(_):_())};n.__R=l;var _=function(){if(! --o.__u){if(o.state.__a){var t=o.state.__a;o.__v.__k[0]=Pt(t,t.__c.__P,t.__c.__O)}var e;for(o.setState({__a:o.__b=null});e=o.o.pop();)e.forceUpdate()}};o.__u++||32&e.__u||o.setState({__a:o.__b=o.__v.__k[0]}),t.then(l,l)},Ct.prototype.componentWillUnmount=function(){this.o=[]},Ct.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),o=this.__v.__k[0].__c;this.__v.__k[0]=kt(this.__b,n,o.__O=o.__P)}this.__b=null}var r=e.__a&&v(g,null,t.fallback);return r&&(r.__u&=-33),[v(g,null,e.__a?null:t.children),r]};var Lt=function(t,e,n){if(++n[1]===n[0]&&t.l.delete(e),t.props.revealOrder&&("t"!==t.props.revealOrder[0]||!t.l.size))for(n=t.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.i=n=n[2]}};(Ot.prototype=new w).__a=function(t){var e=this,n=Et(e.__v),o=e.l.get(t);return o[0]++,function(r){var i=function(){e.props.revealOrder?(o.push(r),Lt(e,t,o)):r()};n?n(i):i()}},Ot.prototype.render=function(t){this.i=null,this.l=/* @__PURE__ */new Map;var e=L(t.children);t.revealOrder&&"b"===t.revealOrder[0]&&e.reverse();for(var n=e.length;n--;)this.l.set(e[n],this.i=[1,0,this.i]);return t.children},Ot.prototype.componentDidUpdate=Ot.prototype.componentDidMount=function(){var t=this;this.l.forEach(function(e,n){Lt(t,n,e)})};var St="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,xt=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Nt=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Ht=/[A-Z0-9]/g,Tt="undefined"!=typeof document,Mt=function(t){return("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/:/fil|che|ra/).test(t)};w.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(w.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var It=e.event;function $t(){}function At(){return this.cancelBubble}function Ut(){return this.defaultPrevented}e.event=function(t){return It&&(t=It(t)),t.persist=$t,t.isPropagationStopped=At,t.isDefaultPrevented=Ut,t.nativeEvent=t};var Dt={enumerable:!1,configurable:!0,get:function(){return this.class}},qt=e.vnode;e.vnode=function(t){"string"==typeof t.type&&function(t){var e=t.props,n=t.type,o={},r=-1===n.indexOf("-");for(var i in e){var l=e[i];if(!("value"===i&&"defaultValue"in e&&null==l||Tt&&"children"===i&&"noscript"===n||"class"===i||"className"===i)){var _=i.toLowerCase();"defaultValue"===i&&"value"in e&&null==e.value?i="value":"download"===i&&!0===l?l="":"translate"===_&&"no"===l?l=!1:"o"===_[0]&&"n"===_[1]?"ondoubleclick"===_?i="ondblclick":"onchange"!==_||"input"!==n&&"textarea"!==n||Mt(e.type)?"onfocus"===_?i="onfocusin":"onblur"===_?i="onfocusout":Nt.test(i)&&(i=_):_=i="oninput":r&&xt.test(i)?i=i.replace(Ht,"-$&").toLowerCase():null===l&&(l=void 0),"oninput"===_&&o[i=_]&&(i="oninputCapture"),o[i]=l}}"select"==n&&o.multiple&&Array.isArray(o.value)&&(o.value=L(e.children).forEach(function(t){t.props.selected=-1!=o.value.indexOf(t.props.value)})),"select"==n&&null!=o.defaultValue&&(o.value=L(e.children).forEach(function(t){t.props.selected=o.multiple?-1!=o.defaultValue.indexOf(t.props.value):o.defaultValue==t.props.value})),e.class&&!e.className?(o.class=e.class,Object.defineProperty(o,"className",Dt)):(e.className&&!e.class||e.class&&e.className)&&(o.class=o.className=e.className),t.props=o}(t),t.$$typeof=St,qt&&qt(t)};var Rt=e.__r;e.__r=function(t){Rt&&Rt(t),t.__c};var jt=e.diffed;e.diffed=function(t){jt&&jt(t);var e=t.props,n=t.__e;null!=n&&"textarea"===t.type&&"value"in e&&e.value!==n.value&&(n.value=null==e.value?"":e.value)};const Wt=t=>/* @__PURE__ */v("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:64,height:64,"aria-hidden":"true",class:"qc-icon",...t},/* @__PURE__ */v("path",{d:"M22.643 17.734a1 1 0 000-1.696L12.417 9.647a1 1 0 00-1.53.848v12.783a1 1 0 001.53.848l10.226-6.392zm-9.166 8.088a3 3 0 01-4.59-2.544V10.495a3 3 0 014.59-2.544l10.226 6.391a3 3 0 010 5.088l-10.226 6.392z"})),Ft={fallbackLocale:"en",interpolation:{prefix:"{{",suffix:"}}"},locale:"en",messages:{}},Vt={nplurals:2,plurals:t=>Number(1!==t)},Bt={fr:{nplurals:2,plurals:t=>Number(t>1)},ja:{nplurals:1,plurals:()=>0}};class Zt{options;constructor(t){this.options={...Ft,...t}}static getValue(t,e){let n,o=t,r=e;for(;o&&"object"==typeof o&&r&&(n=r.indexOf("."))>0;)o=o[r.substring(0,n)],r=r.substring(n+1);return o&&r&&"object"==typeof o?o[r]:""}addMessages(t,e){this.options.messages[t]=e}getLanguage(){return this.options.locale.split("-").shift()}getLocale(){return this.options.locale}setLocale(t){this.options.locale=t}t(t,e={},n){const o=n||this.getLocale(),r=o.split("-").shift(),i=this.getKey(t,e,Bt[r]||Vt),l=this.getTemplate(i,o);return l?this.interpolate(l,e,o):t}getKey(t,e,n){let o=t;if("context"in e&&(o+=`_${e.context}`),"count"in e){const t=n.plurals(Math.abs(Number(e.count)));return 1===n.nplurals||0===t||(2===n.nplurals?o+="_plural":o+=`_${t}`),o}return o}getLocaleAndLang(t){return[t,t.split("-").shift()]}getTemplate(t,e){const n=new Set([this.getLocaleAndLang(e),this.getLocaleAndLang(this.options.fallbackLocale)].flat());for(const o of n){const e=this.options.messages[o],n=Zt.getValue(e,t);if(n)return n}return null}interpolate(t,e={},n){const o=new RegExp(`${this.options.interpolation.prefix}(\\w+)${this.options.interpolation.suffix}`,"g");return t.replace(o,(t,n)=>e[n]).replace(/\$t\(([^)]+)\)/g,(t,o)=>this.t(o,e,n))}}const zt={common:{PLAY_PRESENTATION:"Play Presentation: {{title}}","Presentation not found":"Presentation not found"}};function Gt(t){const e=t.closest("[lang]");return e?e.lang:window.navigator.language||"en"}let Kt;function Yt(){return Kt}function Jt({presentation:t,onClick:e,widgetOptions:n}){const o=Yt(),r=n.playIcon?.position||"center",i=r.includes("left")?"start":r.includes("right")?"end":"center";/* @__PURE__ */
return j("button",{type:"button",class:"qc-thumbnail",onClick:()=>{n.onThumbnailClick?n.onThumbnailClick(t):e()},style:{"place-items":`${r.includes("top")?"start":r.includes("bottom")?"end":"center"} ${i}`},children:[
/* @__PURE__ */j("span",{class:"qc-sr-only",children:o.t("common.PLAY_PRESENTATION",{title:t.title})}),
/* @__PURE__ */j("img",{class:"qc-thumbnail__image",src:t.thumbnail?.cdnUrl||t.thumbnail?.url,alt:""}),n.playIcon?.url?/* @__PURE__ */j("img",{alt:"",class:"qc-thumbnail__play-button",src:n.playIcon?.url,style:{width:`${n.playIcon.width}px`,height:`${n.playIcon.height}px`}}):/* @__PURE__ */j(Wt,{className:"qc-icon qc-thumbnail__play-button qc-thumbnail__play-button--default",width:n.playIcon.width,height:n.playIcon.height})]})}function Qt({presentation:t,widgetOptions:e,playerParameters:n}){const[o,r]=_t(["inline-autoload","inline-autoplay","modal"].includes(e.playbackMode)),i=st(null);at(()=>{if(!o||!i.current)return;const t=i.current,n=()=>{e.onIframeLoad?.(t)};return t.addEventListener("load",n),()=>{t.removeEventListener("load",n)}},[o]);const l=new URL(t.player||""),_=["inline-autoplay","inline","modal"].includes(e.playbackMode);l.searchParams.set("autoplay",_.toString()),Object.entries(n).forEach(([t,e])=>{l.searchParams.set(t,String(e))});const a=/* @__PURE__ */j("iframe",{ref:i,src:l.toString(),width:"100%",height:"100%",allow:"autoplay; fullscreen",title:t.title,class:"qc-player"});return o?a:/* @__PURE__ */j(Jt,{presentation:t,onClick:()=>r(!0),widgetOptions:e})}const Xt=t=>/* @__PURE__ */v("svg",{xmlns:"http://www.w3.org/2000/svg",width:32,height:32,viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"qc-icon",...t},/* @__PURE__ */v("path",{d:"M19.2722 16.1472L28.6472 25.5222C29.0616 25.9366 29.2944 26.4986 29.2944 27.0847C29.2944 27.6708 29.0616 28.2328 28.6472 28.6472C28.2328 29.0616 27.6708 29.2944 27.0847 29.2944C26.4986 29.2944 25.9366 29.0616 25.5222 28.6472L16.1472 19.2722L6.77221 28.6472C6.35781 29.0616 5.79576 29.2944 5.20971 29.2944C4.62366 29.2944 4.06161 29.0616 3.64721 28.6472C3.23281 28.2328 3 27.6708 3 27.0847C3 26.4986 3.23281 25.9366 3.64721 25.5222L13.0222 16.1472L3.64721 6.77221C3.23281 6.35781 3 5.79576 3 5.20971C3 4.62366 3.23281 4.06161 3.64721 3.64721C4.06161 3.23281 4.62366 3 5.20971 3C5.79576 3 6.35781 3.23281 6.77221 3.64721L16.1472 13.0222L25.5222 3.64721C25.9366 3.23281 26.4986 3 27.0847 3C27.6708 3 28.2328 3.23281 28.6472 3.64721C29.0616 4.06161 29.2944 4.62366 29.2944 5.20971C29.2944 5.79576 29.0616 6.35781 28.6472 6.77221L19.2722 16.1472Z"}));function te({presentation:t,widgetOptions:e,playerParameters:n,aspectRatio:o}){const[r,i]=_t(!1),l=st(null);at(()=>{r&&l.current?.showModal()},[r]);const _=()=>{l.current?.close(),i(!1)};return t?/* @__PURE__ */j("div",{class:"qc-dialog",children:[
/* @__PURE__ */j(Jt,{onClick:()=>i(!0),presentation:t,widgetOptions:e}),r&&/* @__PURE__ */j("dialog",{ref:l,onClick:t=>{t.target===l.current&&_()},onClose:()=>i(!1),style:{"aspect-ratio":o||"16 / 9"},children:[
/* @__PURE__ */j("button",{type:"button",class:"qc-dialog__close-button",onClick:_,children:/* @__PURE__ */j(Xt,{className:"qc-icon"})}),
/* @__PURE__ */j(Qt,{presentation:t,playerParameters:n,widgetOptions:e})]})]}):""}const ee=t=>/* @__PURE__ */v("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",fill:"currentColor","aria-hidden":"true",class:"qc-icon",...t},/* @__PURE__ */v("path",{d:"M216,40H40A16,16,0,0,0,24,56V200a16,16,0,0,0,16,16h64a8,8,0,0,0,7.59-5.47l14.83-44.48L163,151.43a8.07,8.07,0,0,0,4.46-4.46l14.62-36.55,44.48-14.83A8,8,0,0,0,232,88V56A16,16,0,0,0,216,40ZM112.41,157.47,98.23,200H40V172l52-52,30.42,30.42L117,152.57A8,8,0,0,0,112.41,157.47ZM216,82.23,173.47,96.41a8,8,0,0,0-4.9,4.62l-14.72,36.82L138.58,144l-35.27-35.27a16,16,0,0,0-22.62,0L40,149.37V56H216Zm12.68,33a8,8,0,0,0-7.21-1.1l-23.8,7.94a8,8,0,0,0-4.9,4.61l-14.31,35.77-35.77,14.31a8,8,0,0,0-4.61,4.9l-7.94,23.8A8,8,0,0,0,137.73,216H216a16,16,0,0,0,16-16V121.73A8,8,0,0,0,228.68,115.24ZM216,200H148.83l3.25-9.75,35.51-14.2a8.07,8.07,0,0,0,4.46-4.46l14.2-35.51,9.75-3.25Z"}));function ne(){const t=Yt();/* @__PURE__ */
return j("div",{class:"qc-not-found",children:[
/* @__PURE__ */j(ee,{width:48,height:48}),
/* @__PURE__ */j("div",{children:t.t("common.Presentation not found")})]})}class oe{configurationService=new Z;configuration;presentationService=new W;presentation=null;container=null;destroyed=!1;static async create(t){const e=new oe(t);return await e.init(),e}constructor(t){this.configuration=this.configurationService.createConfiguration(t)}destroy(){this.destroyed||(this.container&&(q(null,this.container),this.container.innerHTML=""),this.presentation=null,this.destroyed=!0)}async init(){try{this.presentation=await this.presentationService.getPresentation(this.configuration.guid,this.configuration.host,this.configuration.sortBy,this.configuration.sortOrder)}catch(t){console.error(t)}finally{this.mount()}}mount(){const t=this.configuration.selector instanceof HTMLElement?this.configuration.selector:document.querySelector(this.configuration.selector);if(!t)throw new Error(`Element for selector "${this.configuration.selector}" not found`);var e,n;e=t,n=this.configuration.locales,Kt=new Zt({locale:Gt(e),messages:{en:zt,...n}}),this.container=t,t.innerHTML="";const o=this.presentation?.mediaDisplayWidth&&this.presentation?.mediaDisplayHeight?`${this.presentation.mediaDisplayWidth} / ${this.presentation.mediaDisplayHeight}`:"16 / 9";q(
/* @__PURE__ */j("div",{class:"qc-widget qc-presentation-widget",style:{"aspect-ratio":o},children:this.presentation?"modal"===this.configuration.widgetOptions?.playbackMode?/* @__PURE__ */j(te,{aspectRatio:o,presentation:this.presentation,playerParameters:this.configuration.playerParameters,widgetOptions:this.configuration.widgetOptions}):/* @__PURE__ */j(Qt,{presentation:this.presentation,playerParameters:this.configuration.playerParameters,widgetOptions:this.configuration.widgetOptions}):/* @__PURE__ */j(ne,{})}),t)}}export{oe as PresentationWidget,oe as default};
